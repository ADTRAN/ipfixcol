Summary: IPFIX Collector Toolset.
Name: ipfixcol
Version: %(cut -f1 ./VERSION | tr -d '\n')
Release: @RELEASE@
URL: http://www.liberouter.org/
Source: http://homeproj.cesnet.cz/rpm/liberouter/stable/SOURCES/%{name}-%{version}-%{release}.tar.gz
Group: Liberouter
License: BSD
Vendor: CESNET, z.s.p.o.
Packager: @USERNAME@ <@USERMAIL@>
BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}

BuildRequires: gcc make doxygen pkgconfig
BuildRequires: libcommlbr-devel >= 2.0.0 , libcommlbr-devel < 3.0.0
Requires: libcommlbr >= 2.0.0 , libcommlbr < 3.0.0
BuildRequires: libcombo-devel >= 1.4.0 , libcombo-devel < 2.0.0
Requires: postgresql-devel
Requires: libxml2

%description
IPFIX Collector Toolset

%package devel
Summary: IPFIX Collector development package
Group: Liberouter
Requires: ipfixcol = %{version}-%{release}

%description devel
This package contains header files needed for development of plugins for IPFIX Collector (ipfixcol).

%prep
%setup

%post

%preun

%postun


%build
./configure --with-distro=@DISTRO@ --prefix=%{_prefix} @CONFIGURE_PARAMS@;
make
make storage-plugins
make input-plugins
make doc

%install
make DESTDIR=$RPM_BUILD_ROOT install

%files
%{_bindir}/ipfixcol
#%{_mandir}/man1/ipfixcol.1*
#%{_mandir}/man5/ipfixcol.conf.5*
#input plugins
/usr/lib64/ipfixcol_udp_input.so
/usr/lib64/ipfixcol_tcp_input.so
/usr/lib64/ipfixcol_sctp_input.so
/usr/lib64/pkgconfig/ipfixcol.pc
#storage plugins
/usr/lib64/ipfixcol_ipfix_output.so
#config files
/etc/ipfixcol/internalcfg.xml
/etc/ipfixcol/ipfix-elements.xml
/etc/ipfixcol/startup.xml
#doxygen
/usr/share/ipfixcol/doxygen/*

%files devel
%{_prefix}/include/ipfixcol.h
%{_prefix}/include/ipfixcol/*.h
